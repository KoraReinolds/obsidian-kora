# –ö–∞—Å—Ç–æ–º–Ω—ã–µ —ç–º–æ–¥–∑–∏ –≤ Telegram API

## üé® –ß—Ç–æ —Ç–∞–∫–æ–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ —ç–º–æ–¥–∑–∏?

–ö–∞—Å—Ç–æ–º–Ω—ã–µ —ç–º–æ–¥–∑–∏ (Custom Emoji) - —ç—Ç–æ –ø—Ä–µ–º–∏—É–º —Ñ—É–Ω–∫—Ü–∏—è Telegram, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–º–µ–Ω—è—Ç—å –æ–±—ã—á–Ω—ã–µ —ç–º–æ–¥–∑–∏ –Ω–∞ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∏–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –ø–∞–∫–æ–≤. –û–Ω–∏ –≤—ã–≥–ª—è–¥—è—Ç –∫–∞–∫ –æ–±—ã—á–Ω—ã–µ —ç–º–æ–¥–∑–∏, –Ω–æ –∏–º–µ—é—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω.

## üîß –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ API?

### MessageEntity –ø–æ–¥—Ö–æ–¥

Telegram API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **MessageEntity** –¥–ª—è –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —ç–º–æ–¥–∑–∏ –≤ —Ç–µ–∫—Å—Ç–µ:

```json
{
  "text": "üìù –ó–∞–º–µ—Ç–∫–∞ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º —ç–º–æ–¥–∑–∏!",
  "entities": [
    {
      "type": "custom_emoji",
      "offset": 0,
      "length": 2,
      "custom_emoji_id": "5789574674987654321"
    }
  ]
}
```

### –ü–æ–ª—è MessageEntity:
- **type**: `"custom_emoji"`
- **offset**: –ø–æ–∑–∏—Ü–∏—è —ç–º–æ–¥–∑–∏ –≤ —Ç–µ–∫—Å—Ç–µ (0-based)
- **length**: –¥–ª–∏–Ω–∞ —ç–º–æ–¥–∑–∏ –≤ —Å–∏–º–≤–æ–ª–∞—Ö (–æ–±—ã—á–Ω–æ 2 –¥–ª—è UTF-16)
- **custom_emoji_id**: —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —ç–º–æ–¥–∑–∏

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ Custom Emoji ID

**–°–ø–æ—Å–æ–± A: –ß–µ—Ä–µ–∑ @userinfobot**
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—ã–π —ç–º–æ–¥–∑–∏ –±–æ—Ç—É [@userinfobot](https://t.me/userinfobot)
2. –ë–æ—Ç –ø—Ä–∏—à–ª–µ—Ç JSON —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π:
```json
{
  "message_id": 123,
  "entities": [
    {
      "type": "custom_emoji",
      "offset": 0,
      "length": 2,
      "custom_emoji_id": "5789574674987654321"
    }
  ]
}
```

**–°–ø–æ—Å–æ–± B: –ß–µ—Ä–µ–∑ —Å–≤–æ–π –±–æ—Ç**
```javascript
// –í webhook –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ
if (update.message.entities) {
  update.message.entities.forEach(entity => {
    if (entity.type === 'custom_emoji') {
      console.log('Custom emoji ID:', entity.custom_emoji_id);
    }
  });
}
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ –ø–ª–∞–≥–∏–Ω–µ

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Obsidian**
2. **Kora MCP Plugin ‚Üí Telegram Bot Settings**
3. **–í–∫–ª—é—á–∏—Ç–µ "Enable Custom Emojis"**
4. **–î–æ–±–∞–≤—å—Ç–µ –º–∞–ø–ø–∏–Ω–≥–∏:**
   - Standard Emoji: `üìù`
   - Custom Emoji ID: `5789574674987654321`
   - Description: `–ö—Ä–∞—Å–∏–≤–∞—è –∑–∞–ø–∏—Å–∫–∞`

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–¢–µ–ø–µ—Ä—å –≤—Å–µ `üìù` –≤ –≤–∞—à–∏—Ö –∑–∞–º–µ—Ç–∫–∞—Ö –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –∫–∞—Å—Ç–æ–º–Ω—ã–π —ç–º–æ–¥–∑–∏ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –≤ Telegram!

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –í –Ω–∞—à–µ–º –∫–æ–¥–µ:

```typescript
// 1. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞
private processCustomEmojis(text: string): { 
  processedText: string; 
  entities: MessageEntity[] 
} {
  const entities: MessageEntity[] = [];
  
  this.settings.customEmojis.forEach(mapping => {
    const regex = new RegExp(this.escapeRegExp(mapping.standard), 'g');
    let match;
    
    while ((match = regex.exec(text)) !== null) {
      entities.push({
        type: 'custom_emoji',
        offset: match.index,
        length: mapping.standard.length,
        custom_emoji_id: mapping.customId
      });
    }
  });
  
  return { processedText: text, entities };
}

// 2. –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
const payload = {
  chat_id: this.settings.chatId,
  text: processedText,
  parse_mode: 'MarkdownV2',
  entities: entities  // –ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ!
};
```

## üì¶ –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø–∞–∫–∏ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —ç–º–æ–¥–∑–∏

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –ø–∞–∫–∏ Telegram:
- **Telegram Emoji** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —ç–º–æ–¥–∑–∏ –≤ –Ω–æ–≤–æ–º —Å—Ç–∏–ª–µ
- **Emoji Kitchen** - –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —ç–º–æ–¥–∑–∏ –æ—Ç Google
- **Animated Emoji** - –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏

### –ö–∞–∫ –Ω–∞–π—Ç–∏ ID –ø–∞–∫–æ–≤:
1. –ù–∞–π–¥–∏—Ç–µ –∫–∞–Ω–∞–ª —Å –ø–∞–∫–æ–º —ç–º–æ–¥–∑–∏
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–π —ç–º–æ–¥–∑–∏ –∏–∑ –ø–∞–∫–∞ –±–æ—Ç—É @userinfobot
3. –ü–æ–ª—É—á–∏—Ç–µ custom_emoji_id

## üéØ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –¢–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —ç–º–æ–¥–∑–∏ –¥–ª—è –∑–∞–º–µ—Ç–æ–∫
```
üìù ‚Üí –ö–∞—Å—Ç–æ–º–Ω–∞—è "–∑–∞–ø–∏—Å–∫–∞" (ID: 5789...)
‚úÖ ‚Üí –ö–∞—Å—Ç–æ–º–Ω–∞—è "–≥–∞–ª–æ—á–∫–∞" (ID: 5790...)
‚ùó ‚Üí –ö–∞—Å—Ç–æ–º–Ω—ã–π "–≤–æ—Å–∫–ª–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –∑–Ω–∞–∫" (ID: 5791...)
```

### –ü—Ä–∏–º–µ—Ä 2: –ë—Ä–µ–Ω–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —ç–º–æ–¥–∑–∏
```
üöÄ ‚Üí –õ–æ–≥–æ—Ç–∏–ø –≤–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏ (ID: 5792...)
üí° ‚Üí –ö–∞—Å—Ç–æ–º–Ω–∞—è "–ª–∞–º–ø–æ—á–∫–∞ –∏–¥–µ–∏" (ID: 5793...)
```

### –ü—Ä–∏–º–µ—Ä 3: –°–µ–∑–æ–Ω–Ω—ã–µ —ç–º–æ–¥–∑–∏
```
üéÑ ‚Üí –ù–æ–≤–æ–≥–æ–¥–Ω—è—è –µ–ª–∫–∞ –≤ –≤–∞—à–µ–º —Å—Ç–∏–ª–µ (ID: 5794...)
üéÉ ‚Üí –•—ç–ª–ª–æ—É–∏–Ω—Å–∫–∞—è —Ç—ã–∫–≤–∞ (ID: 5795...)
```

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Telegram API:
- –¢–æ–ª—å–∫–æ –¥–ª—è Premium –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ú–∞–∫—Å–∏–º—É–º 200 –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —ç–º–æ–¥–∑–∏ –≤ –æ–¥–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
- –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ —á–∞—Ç–∞—Ö, –≥–¥–µ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –∫–∞—Å—Ç–æ–º–Ω—ã–µ —ç–º–æ–¥–∑–∏

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞—à–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
- –ü—Ä–æ—Å—Ç–∞—è –∑–∞–º–µ–Ω–∞ –ø–æ —Ç–æ—á–Ω–æ–º—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é
- –û–¥–∏–Ω —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —ç–º–æ–¥–∑–∏ ‚Üí –æ–¥–∏–Ω –∫–∞—Å—Ç–æ–º–Ω—ã–π
- –†–µ–≥–∏—Å—Ç—Ä–æ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å

### Fallback –ø–æ–≤–µ–¥–µ–Ω–∏–µ:
- –ï—Å–ª–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–π —ç–º–æ–¥–∑–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π
- –ï—Å–ª–∏ ID –Ω–µ–≤–µ—Ä–Ω—ã–π ‚Üí —ç–º–æ–¥–∑–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è
- –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ–±—ã—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

## üîß –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏:
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É **"Test Emojis"**
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —ç–º–æ–¥–∑–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. –í —Å–ª—É—á–∞–µ –æ—à–∏–±–æ–∫ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ ID –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö

### –õ–æ–≥–∏ –æ—à–∏–±–æ–∫:
```javascript
// –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏
"Bad Request: CUSTOM_EMOJI_INVALID" // –ù–µ–≤–µ—Ä–Ω—ã–π ID
"Bad Request: CUSTOM_EMOJI_NOT_ALLOWED" // –ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ –∫–∞—Å—Ç–æ–º–Ω—ã–µ —ç–º–æ–¥–∑–∏
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Telegram Bot API - MessageEntity](https://core.telegram.org/bots/api#messageentity)
- [Telegram Premium Features](https://telegram.org/premium)
- [Custom Emoji Packs](https://t.me/stickers)
- [@userinfobot](https://t.me/userinfobot) - –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —ç–º–æ–¥–∑–∏

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ö–∞—Å—Ç–æ–º–Ω—ã–µ —ç–º–æ–¥–∑–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–¥–µ–ª–∞—Ç—å –≤–∞—à–∏ –∑–∞–º–µ—Ç–∫–∏ –≤ Telegram –±–æ–ª–µ–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∏ —Å—Ç–∏–ª—å–Ω—ã–º–∏. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω—ã—Ö —ç–º–æ–¥–∑–∏ –∏ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º! 