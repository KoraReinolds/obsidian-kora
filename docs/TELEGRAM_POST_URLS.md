# Генерация ссылок на Telegram посты

## Описание

При отправке заметки в Telegram через плагин сохраняется ID поста в объекте `post_ids`, а ссылка на пост генерируется по требованию с использованием функций `generateTelegramPostUrl()`.

## Как это работает

### Новая система каналов (post_ids)

Когда заметка отправляется в канал через систему folder-based конфигурации, в объект `post_ids` добавляется маппинг:
- ключ: `channelId` - ID канала в Telegram  
- значение: `messageId` - ID сообщения в Telegram

Пример frontmatter:
```yaml
---
post_ids:
  "@myChannel": 123
  "-1001754376016": 456
---
```

## Получение ссылок на посты

### Функции для получения ссылок

#### 1. `generateTelegramPostUrl(channelId: string, messageId: number): string`
Генерирует ссылку на пост для указанного канала и сообщения.

```typescript
const postIds = frontmatterUtils.getFrontmatterField(file, 'post_ids');
const messageId = postIds['@myChannel'];
const url = generateTelegramPostUrl('@myChannel', messageId); // "https://t.me/myChannel/123"
```

## Формат ссылок

### Для каналов с username (@myChannel)
```
https://t.me/myChannel/123
```

### Для каналов с числовым ID (-1001754376016)
```
https://t.me/c/1754376016/456
```

При обработке числовых ID:
1. Убираем префикс `-100` если присутствует (например: `-1001754376016` → `1754376016`)
2. Если нет префикса `-100`, убираем только знак минус
3. Формируем ссылку с префиксом `/c/`

## Применение

1. **Генерация по требованию** - ссылки создаются только когда нужны
2. **Экономия места** - не засоряем frontmatter лишними данными
3. **Простая структура** - объект post_ids легко читается и редактируется
4. **Интеграция** - можно использовать в UI или других компонентах

## Технические детали

Функция `generatePostUrl(channelId: string, messageId: number)` обрабатывает:
- Удаление символа `@` из channelId
- Определение типа канала (username vs числовой ID)
- Правильную обработку префикса `-100` для супергрупп
- Формирование соответствующей ссылки

Функция реализована в:
- `modules/obsidian/file-operations.ts` - основная реализация генерации URL
