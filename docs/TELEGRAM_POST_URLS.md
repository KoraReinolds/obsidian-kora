# Генерация ссылок на Telegram посты

## Описание

При отправке заметки в Telegram через плагин сохраняется ID поста, а ссылка на пост генерируется по требованию с использованием функций `getPostUrl()`.

## Как это работает

### 1. Для новой системы каналов (telegram_channels)

Когда заметка отправляется в канал через новую систему, в массив `telegram_channels` добавляются:
- `messageId` - ID сообщения в Telegram

Пример frontmatter:
```yaml
---
telegram_channels:
  - name: "Мой канал"
    channelId: "@myChannel"
    messageId: 123
  - name: "Другой канал"
    channelId: "-1001754376016"
    messageId: 456
---
```

## Получение ссылок на посты

### Функции для получения ссылок

#### 1. `getPostUrl(channelConfig: ChannelConfig): string | null`
Возвращает ссылку на пост для конфигурации канала из массива `telegram_channels`.

```typescript
const channels = uiManager.getChannelConfigs(file);
const url = uiManager.getPostUrl(channels[0]); // "https://t.me/c/1754376016/456"
```

## Формат ссылок

### Для каналов с username (@myChannel)
```
https://t.me/myChannel/123
```

### Для каналов с числовым ID (-1001754376016)
```
https://t.me/c/1754376016/456
```

При обработке числовых ID:
1. Убираем префикс `-100` если присутствует (например: `-1001754376016` → `1754376016`)
2. Если нет префикса `-100`, убираем только знак минус
3. Формируем ссылку с префиксом `/c/`

## Применение

1. **Генерация по требованию** - ссылки создаются только когда нужны
2. **Экономия места** - не засоряем frontmatter лишними данными
3. **Обратная совместимость** - поддержка legacy формата
4. **Интеграция** - можно использовать в UI или других компонентах

## Технические детали

Функция `generatePostUrl(channelId: string, messageId: number)` обрабатывает:
- Удаление символа `@` из channelId
- Определение типа канала (username vs числовой ID)
- Правильную обработку префикса `-100` для супергрупп
- Формирование соответствующей ссылки

Функция реализована в:
- `modules/ui/ui-manager.ts` - основная реализация с публичными методами
- `modules/ui/commands.ts` - для legacy команд
